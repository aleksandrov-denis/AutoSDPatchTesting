#!/bin/bash

# This script runs the patch testing process by passing patcher_main.sh through an expect script to deal with the password prompt

# expext/autoexpect SOURCE: https://web.archive.org/web/20160404120518/http://www.linuxjournal.com/article/3065?page=0,0
i=1
while read p; do
	# this .exp file is generated by autoexpect, it is slighlty modified
	./expect_pswd.exp 'patcher_main.sh' $p $i
	i=$(( $i + 1 ))
done < patches.txt

# plot the graphs for the averages and variances
gnuplot -c run.gnuplot average.csv avg.png
gnuplot -c run.gnuplot variance.csv var.png
